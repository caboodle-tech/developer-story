const Handlers={},getCSSCustomProp=t=>{let e=getComputedStyle(document.documentElement).getPropertyValue(t);return e=e.length?e.replace(/"/g,"").trim():e};Handlers.toggleDarkMode=()=>{let t="";switch(t=document.documentElement.dataset.darkMode||Cookies.get("dark-mode")){case null:t="off"===getCSSCustomProp("--darkMode")?"off":"on";break;case"on":t="off";break;default:t="on"}Cookies.set("dark-mode",t),document.documentElement.setAttribute("data-dark-mode",t)},Handlers.profileConnect=()=>{const t=event;setTimeout(()=>{t.target.closest("form").submit()},500)},Handlers.profileDisconnect=()=>{var t=event.target.closest("form"),e=t["method"],s=t["action"];const n=t.dataset.load,o=new XMLHttpRequest;t=new FormData(t);o.addEventListener("error",t=>{console.error(t.target.responseText)}),o.addEventListener("load",t=>{var e=t.target["status"];if(200<=e&&e<300){t=JSON.parse(t.target.response),t=(console.log(t),t.items[0].access_token);const s=document.createElement("FORM"),o=(s.style.display="none",s.method="post",s.action=n,document.createElement("INPUT"));o.name="access_token",o.value=t,document.body.appendChild(s),s.submit()}else 300<=e&&e<600||console.warn("A proper status code was not returned from the server.")}),o.open(e,s),o.send(t)};class FetchIt{#options={cache:"default",credentials:"include",headers:{"Content-Type":"application/json"},method:"GET",mode:"cors",redirect:"follow"};constructor(t={}){this.setOptions(t)}setBody(t){this.#options.body=t}setContentType(t){if(8<t.length)this.#options.headers["Content-Type"]=t;else switch(t.toUpperCase()){case"PLAIN":this.#options.headers["Content-Type"]="text/plain";break;case"HTML":this.#options.headers["Content-Type"]="text/html";break;case"FORM":this.#options.headers["Content-Type"]="application/x-www-form-urlencoded";break;case"FILE":case"FILES":this.#options.headers["Content-Type"]="multipart/form-data";break;case"XML":this.#options.headers["Content-Type"]="application/xml";break;default:this.#options.headers["Content-Type"]="application/json"}}setOptions(e={}){Object.keys(e).forEach(t=>{this.#options[t]=e[t]}),this.#options.contentType&&(this.setContentType(this.#options.contentType),delete this.#options.contentType)}async fetch(t,e={}){["GET","HEAD"].includes(this.#options.method)&&this.#options.body&&(console.warn("The `fetch` method does not allow a `body` to be set on GET or HEAD requests."),delete this.#options.body),"object"==typeof this.#options.body&&"FormData"===this.#options.body.constructor.name&&delete this.#options.headers["Content-Type"];const s=await fetch(t,this.#options),o=["body","bodyUsed","headers","ok","redirected","status","statusText","type","url"];return Object.keys(e).forEach(t=>{o.includes(t)||(s[t]=e[t])}),s}}class ButtonToggle extends HTMLButtonElement{constructor(){super(),this.type="button",this.classList.add("button-toggle"),this.addEventListener("click",this.toggle.bind(this))}connectedCallback(){setTimeout(()=>{if(!this.querySelector(".visible")){const t=this.querySelector(".on");t&&t.classList.add("visible")}if(this.classList.contains("toggle")){const e=this.querySelector(".on"),s=(e&&(e.style.display="none"),this.querySelector(".off")),o=(s&&(s.style.display="none"),document.createElement("span"));o.classList.add("slider"),this.appendChild(o)}this.setAria()})}setAria(){var t=this.querySelector(".visible");let e="",s="";t&&(t.dataset.aria&&(e=t.dataset.aria),t.dataset.title&&(s=t.dataset.title)),""===e&&(e=s),""===s&&(s=e),this.ariaLabel=e,this.title=s}toggle(t=!1){const e=this.querySelectorAll(".on"),s=(e.forEach(t=>{t.classList.toggle("visible")}),this.querySelectorAll(".off"));s.forEach(t=>{t.classList.toggle("visible")}),this.setAria(),this.classList.contains("toggle")&&this.classList.toggle("checked"),this.dataset.callback&&!0!==t&&Handlers[this.dataset.callback]&&Handlers[this.dataset.callback]()}}customElements.define("button-toggle",ButtonToggle,{extends:"button"});class CycleWords extends HTMLSpanElement{index=0;timer=3e3;words=[];constructor(){super(),this.classList.add("cycle-words")}connectedCallback(){setTimeout(()=>{const t=this.querySelector("data");t&&(this.style.position="relative",t.remove(),this.setup(t),this.start())})}setup(t){t.style.display="none";let e=t.dataset.change,s=((e=e||3e3)<3e3&&(e=3e3),this.timer=parseInt(e,10),t.innerHTML.replaceAll(/\\,/g,"&#44;")+", "+this.innerHTML);(s=s.split(",")).forEach((t,e)=>{s[e]=t.trim()}),this.words=s}start(){this.words.length<1||(this.interval=setInterval(()=>{let t=0,e=5;this.style.opacity="0",this.innerHTML=` ${this.words[this.index]} `,this.index+=1,this.index>this.words.length-1&&(this.index=0);const s=setInterval(()=>{this.style.opacity=t,this.style.top=`-0.${e}em`,t<1?t+=.1:this.style.opacity="1",0<e?--e:this.style.top="0",1<=t&&e<=0&&clearInterval(s)},90)},this.timer))}stop(){this.interval&&clearInterval(this.interval)}}customElements.define("cycle-words",CycleWords,{extends:"span"});class SubmitForm extends HTMLButtonElement{altText="";handler="";form=null;constructor(){super(),this.classList.add("button-form")}connectedCallback(){setTimeout(()=>{this.setup()})}enctype(){if(this.form)switch(this.form.enctype){case"application/x-www-form-urlencoded":return"FORM";case"multipart/form-data":return"FILE";case"text/plain":return"PLAIN";default:const e=this.form.querySelectorAll("input");for(let t=0;t<e.length;t++)if("FILE"===e[t].type.toUpperCase())return"FILE"}return"FORM"}getBoolean(t){switch(t.toLowerCase()){case 1:case"1":case"t":case"true":return!0;default:return!1}}hideCancelButton(){const t=this.form.querySelectorAll(".cancel-button");t.forEach(t=>{t.style.display="none"})}lockForm(){this.form.reset();const t=this.form.querySelectorAll("input");t.forEach(t=>{t.disabled=!0}),this.form.dataset.disabled=!0;var e=this.altText;this.altText=this.innerHTML,this.innerHTML=e,this.hideCancelButton()}setup(){this.form=this.closest("form"),this.form.dataset.handler&&(this.handler=this.form.dataset.handler);const t=this.querySelector("data");if(t&&(this.altText=t.innerHTML,t.remove()),this.form.dataset.disabled&&this.getBoolean(this.form.dataset.disabled)){const e=this.form.querySelectorAll("input"),s=(e.forEach(t=>{t.disabled=!0}),this.addEventListener("click",this.unlockForm),this.form.querySelectorAll(".cancel-button"));s.forEach(t=>{t.addEventListener("click",this.lockForm.bind(this))}),this.hideCancelButton()}else this.addEventListener("click",this.submit)}showCancelButton(){const t=this.form.querySelectorAll(".cancel-button");t.forEach(t=>{t.style.display="initial"})}submit(){if(this.form&&this.form.reportValidity()){var t={contentType:this.enctype(),method:this.form.method};const e=new FetchIt(t);e.setBody(new FormData(this.form)),e.fetch(this.form.action,{form:this.form}).then(t=>{Handlers[this.handler]?Handlers[this.handler](t):this.form.dataset.reload?window.location.reload():console.log("Form request was successful but there was no handler for the response.",t)}).catch(t=>{Handlers[this.handler]?Handlers[this.handler](t):console.error("There has been a problem with your fetch operation:",t)})}}unlockForm(){if(this.getBoolean(this.form.dataset.disabled)){const e=this.form.querySelectorAll("input");e.forEach(t=>{t.disabled=!1}),this.form.dataset.disabled=!1;var t=this.altText;this.altText=this.innerHTML,this.innerHTML=t,this.showCancelButton()}else this.submit()}}customElements.define("submit-form",SubmitForm,{extends:"button"}),Handlers.join=t=>{!0===t.ok&&(200<=t.status||t.status<300)&&t.form&&t.form.dataset.redirect?window.location.href=t.form.dataset.redirect:t.text().then(t=>{console.error(t)})},Handlers.login=t=>{!0===t.ok&&(200<=t.status||t.status<300)&&t.form&&t.form.dataset.redirect?window.location.href=t.form.dataset.redirect:t.text().then(t=>{console.error(t)})},Handlers.profile=t=>{!0===t.ok&&(200<=t.status||t.status<300)?window.location.reload():t.text().then(t=>{console.error(t)})};
//# sourceMappingURL=main.js.map